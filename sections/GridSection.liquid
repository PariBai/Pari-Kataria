<!-- Popup -->
<div class="popup hidden" id="product-popup">
  <div class="popup-content">
    <div class="image-and-details">
      <img src="{{ section.settings.product_image_1 | asset_url }}" alt="Product Image" class="product-image">

      <div class="product-details">
        <h2 class="product-title">{{ section.settings.product_title }}</h2>
        <p class="product-price">{{ section.settings.product_price }}</p>
        <p class="product-description">{{ section.settings.product_description }}</p>
      </div>
    </div>

    <div class="options-container">
      <div class="color-options">
        <span class="color-label">Color:</span>
        <div class="color-boxes">
          <div class="color-box">
            <div class="color-rectangle"></div>
            <div class="color-text">Blue</div>
          </div>
          <div class="color-box">
            <div class="color-rectangle"></div>
            <div class="color-text">Black</div>
          </div>
        </div>
      </div>

      <div class="size-options">
        <label for="size-dropdown">Size</label>
        <select id="size-dropdown" class="size-dropdown">
          <option value="" disabled selected>Choose your size</option>
          <option value="XS">XS</option>
          <option value="S">S</option>
          <option value="M">M</option>
          <option value="L">L</option>
          <option value="XL">XL</option>
          <!-- Add more sizes as needed -->
        </select>
      </div>

      <div class="add-to-cart">
        <span>ADD TO CART</span>
        <img src="{{ 'Line 15.png' | asset_url }}" alt="Arrow" class="button-arrow" width="24" height="auto">
      </div>
    </div>

    <img
      src="{{ 'close-icon.png' | asset_url }}"
      alt="Close"
      class="close-icon"
      onclick="closePopup()"
      width="22"
      height="22"
    >
  </div>
</div>

<!-- Grid Section -->
<section class="custom-grid-section">
  <div class="grid-container">
    <!-- Custom Text Div -->
    <div class="custom-text">
      <p>{{ section.settings.custom_grid_text }}</p>
    </div>

    <!-- Product Listings -->
    <div class="product-listings">
      <!-- Loop to display six customizable images with unique defaults -->
      <div class="product-item">
        <div class="icon-container" style="top: 238px; left: 256.5px;">
          <img
            src="{{ 'Add icon.png' | asset_url }} "
            height="22"
            width="22"
            alt="Add Icon 1"
            class="add-icon"
            data-product-image="{{ section.settings.product_image_1 | default: 'default-image-1.png' | asset_url }}"
            data-product-title="Orange Wide Leg"
            data-product-price="€980,00"
            data-product-description="This tailored jacket is crafted from jersey featuring a micro Monogram motif in relief."
            data-product-colors="Blue,Black"
          >
        </div>
        <img
          src="{{ section.settings.product_image_1 | default: 'default-image-1.png' | asset_url }}"
          alt="Product 1"
          width="433"
          height="444"
        >
      </div>
      <div class="product-item">
        <div class="icon-container" style="top: 222px; left: 355.5px;">
          <img src="{{ 'Add icon.png' | asset_url }}" alt="Add Icon 3" class="add-icon"
          data-product-image="{{ section.settings.product_image_2 | default: 'default-image-2.png' | asset_url }}"
          data-product-title="Tailored Jacket"
          data-product-price="€980,00"
          data-product-description="This tailored jacket is crafted from jersey featuring a micro Monogram motif in relief."
          data-product-colors="Blue,Black"
          >
        </div>
        <img
          src="{{ section.settings.product_image_3 | default: 'default-image-2.png' | asset_url }}"
          alt="Product 3"
          width="433"
          height="444"
        >
      </div>
      <div class="product-item">
        <div class="icon-container" style="top: 82px; left: 261px;">
          <img src="{{ 'Add icon.png' | asset_url }}" alt="Add Icon 3" class="add-icon"
          data-product-image="{{ section.settings.product_image_3 | default: 'default-image-3.png' | asset_url }}"
          data-product-title="Accordion Pleated Dress"
          data-product-price="€980,00"
          data-product-description="This tailored jacket is crafted from jersey featuring a micro Monogram motif in relief."
          data-product-colors="Blue,Black"
          >
        </div>
        <img
          src="{{ section.settings.product_image_3 | default: 'default-image-3.png' | asset_url }}"
          alt="Product 3"
          width="433"
          height="444"
        >
      </div>
      <div class="product-item">
        <div class="icon-container" style="top: 71px; left: 301.5px;">
          <img src="{{ 'Add icon.png' | asset_url }}" alt="Add Icon 4" class="add-icon"
          data-product-image="{{ section.settings.product_image_4 | default: 'default-image-4.png' | asset_url }}"
          data-product-title="Green Trench Coat"
          data-product-price="€980,00"
          data-product-description="This tailored jacket is crafted from jersey featuring a micro Monogram motif in relief."
          data-product-colors="Blue,Black"
          >
        </div>
        <img
          src="{{ section.settings.product_image_4 | default: 'default-image-4.png' | asset_url }}"
          alt="Product 4"
          width="433"
          height="444"
        >
      </div>
      <div class="product-item">
        <div class="icon-container" style="top: 104px; left: 212.5px;">
          <img src="{{ 'Add icon.png' | asset_url }}" alt="Add Icon 5" class="add-icon"
          data-product-image="{{ section.settings.product_image_5 | default: 'default-image-5.png' | asset_url }}"
          data-product-title="Tennis Blue T-Shirt"
          data-product-price="€980,00"
          data-product-description="This tailored jacket is crafted from jersey featuring a micro Monogram motif in relief."
          data-product-colors="Blue,Black"
          >
        </div>
        <img
          src="{{ section.settings.product_image_5 | default: 'default-image-5.png' | asset_url }}"
          alt="Product 5"
          width="433"
          height="444"
        >
      </div>
      <div class="product-item">
        <div class="icon-container" style="top: 164px; left: 319.5px;">
          <img src="{{ 'Add icon.png' | asset_url }}" alt="Add Icon 6" class="add-icon"
          data-product-image="{{ section.settings.product_image_6 | default: 'default-image-6.png' | asset_url }}"
          data-product-title="Long Sleeve Tennis Top"
          data-product-price="€980,00"
          data-product-description="This tailored jacket is crafted from jersey featuring a micro Monogram motif in relief."
          data-product-colors="Blue,Black"
          >
        </div>
        <img
          src="{{ section.settings.product_image_6 | default: 'default-image-6.png' | asset_url }}"
          alt="Product 6"
          width="433"
          height="444"
        >
      </div>
    </div>
  </div>
</section>

<style>
                                  .custom-grid-section {
                                    margin: 90px 51.5px 51.5px 51.5px; /* Top: 90px, Left/Right/Bottom: 51.5px */
                                    width: 1339px; /* Total width of the section */
                                  }

                                  .grid-container {
                                    display: block; /* Remove flex */
                                  }

                                  .custom-text {
                                    width: 372px;
                                    height: 43px;
                                  }

                                  .custom-text p {
                                    font-family: Lustria;
                                    font-size: 36px;
                                    font-weight: 400;
                                    line-height: 43.2px;
                                    text-align: left;
                                    color: #000000;
                                    margin: 0; /* Remove default margins */
                                  }

                                  /* Product Listings Styling */
                                  .product-listings {
                                    display: grid; /* Use grid for layout */
                                    grid-template-columns: repeat(3, 1fr); /* Three equal columns */
                                    gap: 20px; /* Equal gap between items */
                                    margin-top: 30px; /* Gap between text and images */
                                  }

                                  .product-item {
                                    position: relative; /* Enable positioning of the icon */
                                    width: 433px; /* Fixed width for product items */
                                    height: 444px; /* Fixed height for product items */
                                    /* Black border */
                                  }

                                  .product-item img {
                                    width: 100%; /* Take full width of product item */
                                    height: 100%; /* Full height of product item */
                                    object-fit: cover; /* Cover to fill the item */
                                  }

                                  .icon-container {
                                    position: absolute; /* Positioning the icon absolutely */
                                    width: 22px; /* Fixed width for icon */
                                    height: 22px; /* Fixed height for icon */
                                  }

                                  .add-icon {
                                    width: 100%; /* Make the icon responsive to its container */
                                    height: 100%; /* Make the icon responsive to its container */
                                    object-fit: cover; /* Keep aspect ratio */
                                  }
                                  .popup {
                                  position: fixed;
                                  top: 0;
                                  left: 0;
                                  width: 100%;
                                  height: 100%;
                                  background: rgba(0, 0, 0, 0.5);
                                  display: flex;
                                  justify-content: center;
                                  align-items: center;
                                  z-index: 9999;
                                }

                                .popup.hidden {
                                  display: none;
                                }

                                .popup-content {
                                  background: #FFFFFF;
                                  width: 311px;

                                  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);
                                  position: relative;
                                  padding: 20px;
                                  display: flex;
                                  flex-direction: column;
                                  align-items: flex-start;
                                }

                                .image-and-details {
                                  display: flex;
                                  align-items: flex-start; /* Align image and details at the top */
                                  gap: 15px; /* Add space between the image and details */
                                  margin-bottom: 9px; /* Add space below the image-and-details container */
                                }

                                .product-image {
                                  width: 120px;
                                  height: 140px;
                                  opacity: 1;
                                  margin-top:14px;


                                }

                                .product-details {
                                  display: flex;
                                  flex-direction: column;
                                  justify-content: flex-start;
                                }

                                .product-title {
                                  font-family: Jost;
                                  font-size: 16px;
                                  font-weight: 400;
                                  color: #000;
                                  margin: 42 15 5 0px;
                                }

                                .product-price {
                                  font-family: Lustria;
                                  font-size: 16px;
                                  color: #000000;
                                  margin: 0 0 5px;

                              font-weight: 400;
                              line-height: 19.2px;
                              text-align: left;

                                }

                                .product-description {
                                  font-family: Jost;
                                  font-size: 14px;
                                  color: #000;
                                  margin: 0 0 10px;
                                  word-wrap: break-word;
                                  max-width: 100%;

                              font-weight: 300;
                              line-height: 15.4px;
                              letter-spacing: -0.01em;
                              text-align: left;
                                  margin-top:12px;
                                  width: 146px;
                            height: 60px;
                            top: 119px;
                            left: 145px;



                                }

                                .options-container {
                                  display: flex;
                                  flex-direction: column;
                                  gap: 5px;
                                  width: 100%;
                                  margin-top: 5px;
                                }

                                .color-options {
                                  margin-bottom: 3px;
                                }

                                .color-label {
                                  font-family: 'Jost', sans-serif;
                                  font-size: 14px;
                                  font-weight: 400;
                                  color: #333333;
                                  line-height: 18.2px

                                }

                               .color-boxes {
                            display: flex;

                            margin-top: 5px;
                          }

                          .color-box {
                            display: flex;
                            align-items: center;
                            justify-content: flex-start;
                            width: 271px;
                            height: 40px;
                            border: 0.5px solid #000000;
                            padding: 0 10px; /* Add some padding to separate text from the box edge */
                          }

                          .color-box .color-rectangle {
                            width: 4.84px;
                            height: 39.63px;
                            background: #000000; /* Default color, replace with dynamic color */
                            margin-right: 10px; /* Space between color rectangle and text */
                          }

                          .color-box .color-text {
                            font-family: Jost;
                            font-size: 18px;
                            font-weight: 400;
                            line-height: 18px;
                            letter-spacing: -0.02em;
                            text-align: left;
                            color: #000; /* Color of the text */


                          }


                                .size-options {
                                  margin-bottom: 15px;
                                  width: 100%;
                                }
                            .size-options label {
                      font-family: Jost; /* Font family */
                      font-size: 14px; /* Font size */
                      font-weight: 400; /* Font weight */
                      color: #333333; /* Text color */
                      line-height: 18.2px; /* Line height */
                      margin-bottom: 5px; /* Space below the label */
                    }


                                .size-dropdown {
                                  width: 100%;
                                  height: 40px;
                                  margin-top: 5px;
                                  border: 0.5px solid #000;
                                }

                          .add-to-cart {
                display: inline-flex; /* Use inline-flex to align items */
                align-items: center; /* Center items vertically */
                padding: 10px 10px; /* Adjust padding for the button */
                background-color: #000000; /* Black background */
                text-decoration: none; /* No underline */
                width: 100%; /* Full width */
                height: 45px; /* Fixed height */
                opacity: 1; /* Full opacity */
                border: none; /* No border */
                position: relative; /* For positioning */
                overflow: hidden; /* Ensure hover effect stays within button */

              }

              .add-to-cart span {
                font-family: Jost; /* Font family */
                font-size: 16px; /* Font size */
                font-weight: 400; /* Font weight */
                line-height: 20.48px; /* Line height */
                color: #FFFFFF; /* White text */
                z-index: 1; /* Keeps text above the background */
                text-tranform:uppercase;
                margin-left: 67px;
              }

              .button-arrow {
                width: 24px; /* Set width for the arrow icon */
                height: auto; /* Maintain aspect ratio */
                margin-left: 19px; /* Add margin between text and arrow */
                z-index: 1; /* Keeps arrow above the background */

              }




                                .close-icon {
                                  width: 22px;
                                  height: 22px;
                                  position: absolute;
                                  top: 10px;
                                  right: 10px;
                                  cursor: pointer;
                                  opacity: 1;
                                }
                          .color-box.active {
                           /* Highlight the active color */
                            background:#000000;

                        }
                      .color-box.active .color-text {
                          color: #FFFFFF; /* White text color */
                      }
                        .product-image {
                          /* Ensure the product image background remains unaffected by color selection */
                          background-color: transparent; /* Prevent image background from changing */
                        }
             /* Base styles for desktop view remain unchanged */

          /* Mobile view for width 342px */
         /* Mobile view for width 342px */
        @media (max-width: 420px) {
          /* Body width adjusted for mobile view */
          body {
            width: 342px;
            height:617px;
            margin: 0 auto; /* Center the container on small screens */
          }

          /* Grid for product images to ensure two images per row */
          .product-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Two images per row */
            gap: 10px; /* Space between grid items */
          }

          /* Center the text "Tisso Vison in World" */
          .custom-text p {
            text-align: center;
          }

          /* Set the product image dimensions for mobile view */
          .product-image {
            width: 169px;
            height: 186px;
            object-fit: cover; /* Ensure the image scales correctly */
          }

          /* Reduce margins/paddings for mobile view */
          .custom-grid-section {
            margin: 20px 10px; /* Adjust the margin for mobile */
            width: 100%; /* Full width for mobile */
          }

          .custom-text {
            width: auto; /* Full width for mobile */
            height: auto; /* Adjust height for mobile */
          }

          /* Adjust product listing grid for mobile */
          .product-listings {
            grid-template-columns: repeat(2, 1fr); /* Two products per row on mobile */
            gap: 10px; /* Adjust gap for small screens */
            margin-top: 15px; /* Reduce space on mobile */
          }

          /* Adjust product item sizes */
          .product-item {
            width: auto; /* Full width for mobile */
            height: auto; /* Flexible height for mobile */
            position: relative; /* Ensure relative positioning for child elements */
          }


  .popup-content {

      width: 335px; /* Set width for popup content */


  }




      .icon-container {
          position: absolute; /* Ensure it's positioned within the product item */
          top: 10px; /* Adjust as necessary */
          left: 10px; /* Adjust as necessary */
        z-index: 100;
      }




          /* Adjust color and size boxes for mobile */






      .product-item    .icon-container   .add-icon {
        width: 15px !important; /* Ensure the icon width is applied */
        height: 15px !important; /* Ensure the icon height is applied */
        top: 10px !important; /* Adjust as necessary */
        left: 10px !important; /* Adjust as necessary */
        opacity: 1 !important; /* Ensure the icon is visible */
        position: absolute !important; /* Ensure it stays within the product item */
    }




        }
</style>

<script>
     // Add event listeners to all icons for showing product details popup
  document.querySelectorAll('.add-icon').forEach(icon => {
    icon.addEventListener('click', function () {
      // Get the product data from the data attributes
      const productImage = this.getAttribute('data-product-image');
      const productTitle = this.getAttribute('data-product-title');
      const productPrice = this.getAttribute('data-product-price');
      const productDescription = this.getAttribute('data-product-description');
      const productColors = this.getAttribute('data-product-colors').split(',');

      // Populate the popup with the product data
      document.querySelector('.product-image').src = productImage;
      document.querySelector('.product-title').textContent = productTitle;
      document.querySelector('.product-price').textContent = productPrice;
      document.querySelector('.product-description').textContent = productDescription;

      // Clear previous color buttons
      const colorOptionsContainer = document.querySelector('.color-boxes');
      colorOptionsContainer.innerHTML = ''; // Clear any previously added color boxes

      // Create color boxes dynamically
      productColors.forEach(color => {
        const colorBox = document.createElement('div');
        colorBox.classList.add('color-box');

        // Create color rectangle
        const colorRectangle = document.createElement('div');
        colorRectangle.classList.add('color-rectangle');
        colorRectangle.style.backgroundColor = color.toLowerCase(); // Set the background color

        // Create color text
        const colorText = document.createElement('div');
        colorText.classList.add('color-text');
        colorText.textContent = color;

        // Append both rectangle and text to the color box
        colorBox.appendChild(colorRectangle);
        colorBox.appendChild(colorText);

        // Handle color selection on click
        colorBox.addEventListener('click', function () {
          document.querySelectorAll('.color-box').forEach(box => box.classList.remove('active'));
          this.classList.add('active');
          document.querySelector('.product-image').style.backgroundColor = color.toLowerCase();
        });

        // Add the color box to the container
        colorOptionsContainer.appendChild(colorBox);
      });

      // Show the popup
      document.getElementById('product-popup').classList.remove('hidden');

      // Close popup functionality
      document.querySelector('.close-icon').addEventListener('click', function () {
        document.getElementById('product-popup').classList.add('hidden');
      });
    });
  });

  // Handle add to cart functionality
  document.querySelector('.add-to-cart').addEventListener('click', function () {
    const selectedColor = document.querySelector('.color-box.active');
    const selectedSize = document.getElementById('size-dropdown').value;

    if (!selectedColor) {
      alert('Please select a color.');
      return;
    }

    if (!selectedSize || selectedSize === 'Choose your size') {
      alert('Please select a size.');
      return;
    }

    // Gather product details
    const productDetails = {
      color: selectedColor.querySelector('.color-text').textContent,
      size: selectedSize,
      title: document.querySelector('.product-title').textContent,
      price: document.querySelector('.product-price').textContent
    };

    // Retrieve cart from local storage or initialize it
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Add the current product to the cart
    cart.push(productDetails);

    // Check if the selected product is "Black" and "Medium"
    if (productDetails.color === 'Black' && productDetails.size === 'M') {
      const softWinterJacket = {
        title: 'Soft Winter Jacket',
        color: 'Black',
        size: 'Medium',
        price: '200' // Actual price of Soft Winter Jacket
      };
      cart.push(softWinterJacket);
      console.log('Soft Winter Jacket automatically added to cart:', softWinterJacket);
    }

    // Save updated cart to local storage
    localStorage.setItem('cart', JSON.stringify(cart));

    alert('Product added to cart successfully!');
    console.log('Cart updated:', cart);
  });
</script>
{% schema %}
{
  "name": "Grid Section",
  "settings": [
    {
      "type": "text",
      "id": "custom_grid_text",
      "label": "Custom Grid Text",
      "default": "Tisso vision in the wild"
    },
    {
      "type": "image_picker",
      "id": "product_image_1",
      "label": "Product Image 1"
    },
    {
      "type": "image_picker",
      "id": "product_image_2",
      "label": "Product Image 2"
    },
    {
      "type": "image_picker",
      "id": "product_image_3",
      "label": "Product Image 3"
    },
    {
      "type": "image_picker",
      "id": "product_image_4",
      "label": "Product Image 4"
    },
    {
      "type": "image_picker",
      "id": "product_image_5",
      "label": "Product Image 5"
    },
    {
      "type": "image_picker",
      "id": "product_image_6",
      "label": "Product Image 6"
    }
  ],
  "presets": [{
    "name": "Grid Section"
  }]
}
{% endschema %}
